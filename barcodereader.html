<!DOCTYPE html>
<html>
<head>
    <title>Barcode Reader</title>
    <meta charset="UTF-8" />
    <script src="//unpkg.com/javascript-barcode-reader"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <!-- <input type="file" accept="image/*" id="fileInput" capture="environment"> -->
     <div class="input_containers">
        <h1>Barcode Reader</h1>
        <label class="mylabel" for="barcodeimage">Take a photo or upload</label>
        <input type="file" id="barcodeimage" style="display:none;">
        <p id="log"></p>
    </div>
    <script>
        document.getElementById('barcodeimage').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const image = new Image();
                    image.src = e.target.result;
                    image.onload = async function() {
                        try {
                            const code = await javascriptBarcodeReader({
                                image: image,
                                barcode: 'code-93',
                                options: {
                                    // useAdaptiveThreshold: true // Uncomment if needed
                                    // singlePass: true // Uncomment if needed
                                }
                            });
                            document.getElementById('log').innerText = `Barcode: ${code}`
                        } catch (err) {
                            document.getElementById('log').innerText = "Barcode not recognized"
                        }
                    };
                    image.onerror = function() {
                        document.getElementById('log').innerText = "Failed to load image."
                    };
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>
